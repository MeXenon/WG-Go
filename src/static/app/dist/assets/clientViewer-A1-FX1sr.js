import{J as C,q as B,r as b,c as n,f as e,a as s,t as f,F as p,i as k,b as c,n as w,u as $,L as S,d as V,e as A,k as D,g as E,M as L}from"./index-DkugIDDs.js";import{D as P}from"./DashboardClientAssignmentStore-B7DQKpKM.js";import{L as _}from"./localeText-Ba6eq1Di.js";const N={class:"card rounded-0 border-0"},z={class:"card-header rounded-top-3 sticky-top z-5 bg-body-secondary border-0 shadow border-bottom btn-brand text-white"},F={class:"card-body p-0"},G={class:"list-group list-group-flush"},M={key:0},T={class:"text-body"},U={class:"text-muted"},j={key:1},q={class:"text-body"},J={class:"text-muted"},O=["onClick"],R=["onClick"],I=C({__name:"availablePeersGroup",props:["configuration","peers","clientAssignedPeers"],emits:["assign","unassign"],setup(u,{emit:m}){const l=u,a=m,d=P(),r=B(()=>l.clientAssignedPeers&&Object.keys(l.clientAssignedPeers).includes(l.configuration)?l.peers.filter(x=>!l.clientAssignedPeers[l.configuration].map(o=>o.id).includes(x.id)):l.peers),v=b(!1);return(x,o)=>(e(),n("div",N,[s("div",z,[s("samp",null,f(u.configuration),1)]),s("div",F,[s("div",G,[(e(!0),n(p,null,k(r.value,i=>(e(),n("div",{class:"list-group-item d-flex border-bottom list-group-item-action d-flex align-items-center gap-3",key:i.id},[v.value?(e(),n("div",j,[s("small",q,[c(_,{t:"Are you sure to remove this peer?"})]),o[1]||(o[1]=s("br",null,null,-1)),s("small",J,[s("samp",null,f(i.id),1)])])):(e(),n("div",M,[s("small",T,[s("samp",null,f(i.id),1)]),o[0]||(o[0]=s("br",null,null,-1)),s("small",U,f(i.name?i.name:"Untitled Peer"),1)])),u.clientAssignedPeers?(e(),n("button",{key:2,onClick:t=>a("assign",i.id),class:w([{disabled:$(d).assigning},"btn bg-success-subtle text-success-emphasis ms-auto"])},o[2]||(o[2]=[s("i",{class:"bi bi-plus-circle-fill"},null,-1)]),10,O)):(e(),n("button",{key:3,onClick:t=>a("unassign",i.assignment_id),class:w([{disabled:$(d).unassigning},"btn bg-danger-subtle text-danger-emphasis ms-auto"]),"aria-label":"Delete Assignment"},o[3]||(o[3]=[s("i",{class:"bi bi-trash-fill"},null,-1)]),10,R))]))),128))])])]))}}),H={class:"d-flex rounded-3 flex-column gap-3"},K={style:{height:"300px"},class:"d-flex flex-column"},Q={class:"d-flex align-items-center mb-2"},W={class:"mb-0"},X={class:"rounded-3 availablePeers border h-100 overflow-scroll flex-grow-1"},Y={key:0,style:{height:"300px"},class:"d-flex flex-column"},Z={class:"rounded-3 availablePeers border h-100 overflow-scroll flex-grow-1"},ss=C({__name:"clientAssignedPeers",props:["client"],setup(u){const m=u,l=b({}),a=b(!1),d=P(),r=b(!1);b(void 0),b(void 0);const v=async()=>{await E("/api/clients/assignedPeers",{ClientID:m.client.ClientID},i=>{l.value=i.data,a.value=!1})};S(async()=>{a.value=!0,await v()});const x=async(i,t,g)=>{await d.assignClient(i,t,g,!1),await v()},o=async i=>{await d.unassignClient(void 0,void 0,i),await v()};return(i,t)=>(e(),n("div",H,[s("div",K,[s("div",Q,[s("h6",W,[c(_,{t:"Assigned Peers"})]),s("button",{class:"btn btn-sm bg-primary-subtle text-primary-emphasis rounded-3 ms-auto",onClick:t[0]||(t[0]=g=>r.value=!r.value)},[r.value?(e(),n(p,{key:1},[t[4]||(t[4]=s("i",{class:"bi bi-check me-2"},null,-1)),t[5]||(t[5]=A("Done "))],64)):(e(),n(p,{key:0},[t[2]||(t[2]=s("i",{class:"bi bi-list-check me-2"},null,-1)),t[3]||(t[3]=A("Manage "))],64))])]),s("div",X,[(e(!0),n(p,null,k(l.value,(g,h)=>(e(),D(I,{configuration:h,peers:g,onUnassign:t[1]||(t[1]=async y=>await o(y))},null,8,["configuration","peers"]))),256))])]),r.value?(e(),n("div",Y,[s("h6",null,[c(_,{t:"Available Peers"})]),s("div",Z,[(e(!0),n(p,null,k($(d).allConfigurationsPeers,(g,h)=>(e(),D(I,{configuration:h,clientAssignedPeers:l.value,peers:g,onAssign:async y=>await x(h,y,m.client.ClientID)},null,8,["configuration","clientAssignedPeers","peers","onAssign"]))),256))])])):V("",!0)]))}}),es={key:0,class:"text-body d-flex flex-column gap-3"},ts={class:"p-4 border-bottom bg-body-tertiary"},ns={class:"text-muted"},is={class:"d-flex align-items-center"},ls={class:"text-muted"},os={class:"ms-auto"},as={class:"px-4"},rs={key:1,class:"d-flex w-100 h-100 text-muted"},ds={class:"m-auto text-center"},gs=C({__name:"clientViewer",setup(u){const m=P(),l=L(),a=B(()=>m.getClientById(l.params.id));return(d,r)=>a.value?(e(),n("div",es,[s("div",ts,[s("small",ns,[c(_,{t:"Email"})]),s("h1",null,f(a.value.Email),1),s("div",is,[s("small",ls,[c(_,{t:"Client ID"})]),s("small",os,[s("samp",null,f(a.value.ClientID),1)])])]),s("div",as,[c(ss,{client:a.value},null,8,["client"])])])):(e(),n("div",rs,[s("div",ds,[r[0]||(r[0]=s("h1",null,[s("i",{class:"bi bi-person-x"})],-1)),s("p",null,[c(_,{t:"Client does not exist"})])])]))}});export{gs as default};
