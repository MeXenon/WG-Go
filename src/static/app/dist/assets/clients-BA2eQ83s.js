import{J as h,q as x,o as E,c as d,a as e,t as f,b as l,F as $,i as k,j as g,w as L,h as S,K as N,f as a,L as D,g as O,e as R,r as y,k as j,m as z,y as B,u as p,G,n as C,d as T,_ as A}from"./index-DrDyuimr.js";import{D as q}from"./DashboardClientAssignmentStore-DBxg-o3U.js";import{L as c}from"./localeText-BMwkcqAG.js";const F={class:"card rounded-0 border-0"},M={class:"card-header d-flex align-items-center rounded-0"},J={class:"my-2"},K={class:"badge text-bg-primary ms-auto"},P={class:"card-body p-0"},U={class:"list-group list-group-flush clientList"},H={class:"text-body"},Q={class:"text-muted"},w=h({__name:"clientGroup",props:["groupName","clients","searchString"],setup(u){const o=u,r=x(()=>{const s=o.searchString.toLowerCase();return o.searchString?o.clients.filter(t=>t.ClientID&&t.ClientID.toLowerCase().includes(s)||t.Email&&t.Email.toLowerCase().includes(s)||t.Name&&t.Name.toLowerCase().includes(s)):o.clients});return N(),E(()=>{document.querySelector(".clientList .active")?.scrollIntoView()}),(s,t)=>{const m=S("RouterLink");return a(),d("div",F,[e("div",M,[e("h6",J,f(u.groupName),1),e("span",K,[l(c,{t:r.value.length+" Clients"},null,8,["t"])])]),e("div",P,[e("div",U,[(a(!0),d($,null,k(r.value,n=>(a(),g(m,{key:n.ClientID,id:"client_"+n.ClientID,"active-class":"active",to:{name:"Client Viewer",params:{id:n.ClientID}},class:"list-group-item d-flex flex-column border-bottom list-group-item-action client"},{default:L(()=>[e("small",H,f(n.Email),1),e("small",Q,f(n.Name?n.Name:"No Name"),1)]),_:2},1032,["id","to"]))),128))])])])}}}),W={class:"d-flex flex-column gap-2"},X={class:"d-flex align-items-center"},Y={class:"mb-0"},Z={class:"form-check form-switch ms-auto"},ee={class:"form-check-label",for:"oidc_switch"},te={class:"alert alert-dark rounded-3 mb-0"},se={class:"rounded-3 btn bg-success-subtle text-success-emphasis border-success-subtle"},oe=h({__name:"oidcSettings",props:["mode"],async setup(u){let o,r;return[o,r]=D(()=>O("/api/oidc/status",{mode:"Client"},s=>{console.log(s)})),await o,r(),(s,t)=>(a(),d("div",W,[e("div",X,[e("h6",Y,[l(c,{t:"OpenID Connect (OIDC)"})]),e("div",Z,[e("label",ee,[l(c,{t:"Enable"})]),t[0]||(t[0]=e("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"oidc_switch"},null,-1))])]),e("div",null,[e("div",te,[l(c,{t:"Due to security reason, in order to edit OIDC configuration, you will need to edit "}),t[1]||(t[1]=e("code",null,"wg-dashboard-oidc-providers.json",-1)),t[2]||(t[2]=R(" directly. If you updated the file, click the update button below to reload the configuration. "))])]),e("button",se,[t[3]||(t[3]=e("i",{class:"bi bi-arrow-clockwise me-2"},null,-1)),l(c,{t:"Refresh"})])]))}}),ne={class:"position-absolute w-100 h-100 top-0 start-0 z-1 rounded-3 d-flex p-2",style:{"background-color":"#00000070"}},ie={class:"card m-auto rounded-3",style:{width:"700px"}},le={class:"card-header bg-transparent d-flex align-items-center gap-2 border-0 p-4 pb-2"},re={class:"mb-0"},ae={class:"card-body px-4"},ce={class:"py-2"},de=h({__name:"clientSettings",emits:["close"],setup(u,{emit:o}){const r=o;return(s,t)=>(a(),d("div",ne,[e("div",ie,[e("div",le,[e("h4",re,[l(c,{t:"Clients Settings"})]),e("button",{type:"button",class:"btn-close ms-auto",onClick:t[0]||(t[0]=m=>r("close"))})]),e("div",ae,[e("div",ce,[l(oe,{mode:"Client"}),t[1]||(t[1]=e("hr",null,null,-1))])])])]))}}),ue={class:"text-body w-100 h-100 pb-2 position-relative"},me={class:"w-100 h-100 card rounded-3"},_e={class:"border-bottom z-0"},pe={class:"d-flex text-body align-items-center sticky-top p-3 bg-body-tertiary rounded-top-3",style:{"border-top-right-radius":"0 !important"}},he=["placeholder"],be={class:"row h-100 g-0"},fe={class:"d-flex flex-column overflow-y-scroll",style:{flex:"1 0 0"}},ge=h({__name:"clients",async setup(u){let o,r;const s=q();[o,r]=D(()=>s.getClients()),await o,r(),s.getAllConfigurationsPeers();const t=y(""),m=N(),n=y(!1),I=x(()=>Object.fromEntries(Object.entries(s.clients).filter(([v,i])=>Object.keys(s.clients).filter(b=>b!=="Local").includes(v))));return(v,i)=>{const b=S("RouterView");return a(),d("div",ue,[e("div",me,[l(j,{name:"zoom"},{default:L(()=>[n.value?(a(),g(de,{key:0,onClose:i[0]||(i[0]=_=>n.value=!1)})):T("",!0)]),_:1}),e("div",_e,[e("div",pe,[i[4]||(i[4]=e("label",{for:"searchClient"},[e("i",{class:"bi bi-search me-2"})],-1)),z(e("input",{"onUpdate:modelValue":i[1]||(i[1]=_=>t.value=_),id:"searchClient",class:"form-control rounded-3 form-control-sm",placeholder:p(G)("Search Clients..."),type:"email",style:{width:"auto"}},null,8,he),[[B,t.value]]),e("button",{class:"btn btn-body ms-auto bg-body-secondary rounded-3 btn-sm",onClick:i[2]||(i[2]=_=>n.value=!n.value)},[i[3]||(i[3]=e("i",{class:"bi bi-gear-fill me-2"},null,-1)),l(c,{t:"Settings"})])])]),e("div",be,[e("div",{class:C([{hide:p(m).params.id},"col-sm-4 border-end d-flex flex-column clientListContainer"])},[e("div",fe,[l(w,{searchString:t.value,clients:p(s).clients.Local,groupName:"Local"},null,8,["searchString","clients"]),(a(!0),d($,null,k(I.value,(_,V)=>(a(),g(w,{searchString:t.value,clients:_,groupName:V},null,8,["searchString","clients","groupName"]))),256))])],2),e("div",{class:C([{hide:!p(m).params.id},"col-sm-8 clientViewerContainer"])},[l(b)],2)])])])}}}),we=A(ge,[["__scopeId","data-v-9183c5cc"]]);export{we as default};
