import{Q as l}from"./browser-DTDqTpn-.js";import{L as u}from"./localeText-CV2kgMec.js";import{_ as h,h as f,c,f as s,a as e,b as p,d as i,j as m,n as _,g,D as v}from"./index-BNmigxWy.js";import"./galois-field-CkUIqpA6.js";const w={name:"peerQRCode",components:{LocaleText:u},props:{selectedPeer:Object},setup(){return{dashboardStore:v()}},data(){return{loading:!0}},mounted(){g("/api/downloadPeer/"+this.$route.params.id,{id:this.selectedPeer.id},o=>{if(this.loading=!1,o.status){let t="";if(this.selectedPeer.configuration.Protocol==="awg"){let a={containers:[{awg:{isThirdPartyConfig:!0,last_config:o.data.file,port:this.selectedPeer.configuration.ListenPort,transport_proto:"udp"},container:"amnezia-awg"}],defaultContainer:"amnezia-awg",description:this.selectedPeer.name,hostName:this.dashboardStore.Configuration.Peers.remote_endpoint};l.toCanvas(document.querySelector("#awg_vpn_qrcode"),btoa(JSON.stringify(a)),r=>{r&&console.error(r)})}t=o.data.file,l.toCanvas(document.querySelector("#qrcode"),t,a=>{a&&console.error(a)})}else this.dashboardStore.newMessage("Server",o.message,"danger")})}},b={class:"peerSettingContainer w-100 h-100 position-absolute top-0 start-0"},P={class:"container d-flex h-100 w-100"},x={class:"m-auto modal-dialog-centered dashboardModal justify-content-center"},C={class:"card rounded-3 shadow"},y={class:"card-header bg-transparent d-flex align-items-center gap-2 border-0 p-4 pb-0"},S={class:"mb-0"},k={class:"card-body p-4"},q={class:"d-flex gap-2"},L={class:"d-flex flex-column gap-2 align-items-center"},N={key:0},Q={key:1,class:"spinner-border m-auto",role:"status"};function z(o,t,a,r,d,A){const n=f("LocaleText");return s(),c("div",b,[e("div",P,[e("div",x,[e("div",C,[e("div",y,[e("h4",S,[p(n,{t:"QR Code"})]),e("button",{type:"button",class:"btn-close ms-auto",onClick:t[0]||(t[0]=R=>this.$emit("close"))})]),e("div",k,[e("div",q,[e("div",L,[e("canvas",{id:"qrcode",style:{width:"200px !important",height:"200px !important"},class:_(["rounded-3 shadow animate__animated animate__fadeIn animate__faster",{"d-none":d.loading}])},null,2),this.selectedPeer.configuration.Protocol==="wg"?(s(),m(n,{key:0,t:"Scan with WireGuard App",class:"text-muted"})):i("",!0),this.selectedPeer.configuration.Protocol==="awg"?(s(),m(n,{key:1,t:"Scan with AmneziaWG App",class:"text-muted"})):i("",!0)]),this.selectedPeer.configuration.Protocol==="awg"?(s(),c("div",N,[e("canvas",{id:"awg_vpn_qrcode",class:_(["rounded-3 shadow animate__animated animate__fadeIn animate__faster",{"d-none":d.loading}])},null,2),p(n,{t:"Scan with AmneziaVPN App",class:"text-muted"})])):i("",!0),d.loading?(s(),c("div",Q,t[1]||(t[1]=[e("span",{class:"visually-hidden"},"Loading...",-1)]))):i("",!0)])])])])])])}const $=h(w,[["render",z],["__scopeId","data-v-f3f73205"]]);export{$ as default};
