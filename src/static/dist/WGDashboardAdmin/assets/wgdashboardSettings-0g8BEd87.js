import{B as V,r as v,C as M,c as r,d as y,a as e,b as t,m as p,e as D,y as A,E as N,v as C,F as $,i as L,n as w,u as I,A as j,t as H,z as U,g as R,f as a,o as F,j as W,w as E,S as q,_ as z,D as G}from"./index-CABeVeE9.js";import{L as o}from"./localeText-DQAd5S69.js";import{D as K,d as O,e as Y,A as Z,a as J,b as Q,_ as X,c as ee}from"./dashboardEmailSettings-C5n5kV8_.js";import"./dayjs.min-CcWRrifx.js";import"./vue-datepicker-6uDuedXa.js";const se={class:"p-3"},te={key:0},le={for:"PayloadURL",class:"form-label fw-bold text-muted"},oe=["disabled"],ae={for:"ContentType",class:"form-label fw-bold text-muted"},de=["disabled"],ne={class:"form-label fw-bold text-muted"},ie={class:"form-check form-switch mb-2"},re=["disabled"],ue={class:"form-check-label",for:"VerifySSL"},ce={key:0,class:"alert-danger alert rounded-3"},be={class:"form-label fw-bold text-muted"},ve={class:"card rounded-3"},me={class:"card-body d-flex gap-2 flex-column"},fe={class:"d-flex gap-2"},pe={class:"flex-grow-1"},_e=["disabled","onUpdate:modelValue"],he={class:"flex-grow-1"},ye=["disabled","onUpdate:modelValue"],ke=["onClick"],ge={class:"form-label fw-bold text-muted"},we={class:"form-check form-check-inline"},xe=["disabled","id","value"],Se=["for"],$e={class:"form-label fw-bold text-muted"},He={class:"form-check form-switch mb-2"},Ae=["disabled"],Ce={class:"form-check-label",for:"IsActive"},De={key:0,class:"alert alert-danger rounded-3"},Le={class:"d-flex gap-2"},We={class:"d-flex align-items-center"},Ve={class:"mb-0"},P=V({__name:"addWebHook",props:["webHook"],emits:["refresh","delete"],async setup(k,{emit:f}){let g,n;const l=v({ContentType:String,Headers:Object,IsActive:Boolean,Notes:String,PayloadURL:String,SubscribedActions:Array,VerifySSL:Boolean,WebHookID:String}),b=k;b.webHook?l.value={...b.webHook}:([g,n]=M(()=>R("/api/webHooks/createWebHook",{},m=>{l.value=m.data})),await g,n());const x=v({peer_created:"Peer Created",peer_deleted:"Peer Deleted",peer_updated:"Peer Updated"}),d=f,c=v(!1),S=v(""),u=v(!1),T=async m=>{m&&m.preventDefault(),u.value=!0,await U("/api/webHooks/updateWebHook",l.value,s=>{s.status?d("refresh"):(c.value=!0,S.value=s.message),u.value=!1})},B=async()=>{u.value=!0,await U("/api/webHooks/deleteWebHook",l.value,m=>{m.status?d("delete"):(c.value=!0,S.value=m.message),u.value=!1})};return(m,s)=>(a(),r("div",se,[k.webHook?y("",!0):(a(),r("div",te,[e("h6",null,[t(o,{t:"Add Webhook"})]),e("p",null,[t(o,{t:"WGDashboard will sent a POST Request to the URL below with details of any subscribed events."})])])),e("form",{onSubmit:s[7]||(s[7]=i=>T(i)),class:"d-flex flex-column gap-2"},[e("div",null,[e("label",le,[e("small",null,[t(o,{t:"Payload URL"}),s[8]||(s[8]=D("* "))])]),p(e("input",{required:"",disabled:u.value,id:"PayloadURL","onUpdate:modelValue":s[0]||(s[0]=i=>l.value.PayloadURL=i),class:"form-control rounded-3",type:"url"},null,8,oe),[[A,l.value.PayloadURL]])]),e("div",null,[e("label",ae,[e("small",null,[t(o,{t:"Content Type"}),s[9]||(s[9]=D("* "))])]),p(e("select",{disabled:u.value,id:"ContentType","onUpdate:modelValue":s[1]||(s[1]=i=>l.value.ContentType=i),class:"form-select rounded-3",required:""},s[10]||(s[10]=[e("option",{value:"application/json"}," application/json ",-1),e("option",{value:"application/x-www-form-urlencoded"}," application/x-www-form-urlencoded ",-1)]),8,de),[[N,l.value.ContentType]])]),e("div",null,[e("label",ne,[e("small",null,[t(o,{t:"Verify SSL"})])]),e("div",null,[e("div",ie,[p(e("input",{disabled:u.value,"onUpdate:modelValue":s[2]||(s[2]=i=>l.value.VerifySSL=i),class:"form-check-input",type:"checkbox",role:"switch",id:"VerifySSL"},null,8,re),[[C,l.value.VerifySSL]]),e("label",ue,[t(o,{t:l.value.VerifySSL?"Enabled":"Disabled"},null,8,["t"])])]),l.value.VerifySSL?y("",!0):(a(),r("div",ce,[s[11]||(s[11]=e("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),t(o,{t:"We highly suggest to enable SSL verification"})]))])]),e("div",null,[e("label",be,[e("small",null,[t(o,{t:"Custom Headers"})])]),e("div",ve,[e("div",me,[(a(!0),r($,null,L(l.value.Headers,(i,_)=>(a(),r("div",fe,[e("div",pe,[p(e("input",{class:"form-control rounded-3 form-control-sm",disabled:u.value,"onUpdate:modelValue":h=>i.key=h,placeholder:"Key"},null,8,_e),[[A,i.key]])]),e("div",he,[p(e("input",{class:"form-control rounded-3 form-control-sm",disabled:u.value,"onUpdate:modelValue":h=>i.value=h,placeholder:"Value"},null,8,ye),[[A,i.value]])]),e("button",{class:w([{disabled:u.value},"btn btn-sm bg-danger-subtle text-danger-emphasis border-danger-subtle rounded-3"]),type:"button",onClick:h=>delete l.value.Headers[_]},s[12]||(s[12]=[e("i",{class:"bi bi-trash-fill"},null,-1)]),10,ke)]))),256)),e("button",{type:"button",class:w([{disabled:u.value},"btn btn-sm bg-primary-subtle text-primary-emphasis border-primary-subtle rounded-3"]),onClick:s[3]||(s[3]=i=>l.value.Headers[I(j)().toString()]={key:"",value:""})},[s[13]||(s[13]=e("i",{class:"bi bi-plus-lg me-2"},null,-1)),t(o,{t:"Header"})],2)])])]),s[15]||(s[15]=e("hr",null,null,-1)),e("div",null,[e("label",ge,[e("small",null,[t(o,{t:"Subscribed Actions"})])]),e("div",null,[(a(!0),r($,null,L(x.value,(i,_)=>(a(),r("div",we,[p(e("input",{class:"form-check-input",disabled:l.value.SubscribedActions.length===1&&l.value.SubscribedActions.includes(_)||u.value,type:"checkbox",id:_,value:_,"onUpdate:modelValue":s[4]||(s[4]=h=>l.value.SubscribedActions=h)},null,8,xe),[[C,l.value.SubscribedActions]]),e("label",{class:"form-check-label",for:_},H(i),9,Se)]))),256))])]),s[16]||(s[16]=e("hr",null,null,-1)),e("div",null,[e("label",$e,[e("small",null,[t(o,{t:"Enable Webhook"})])]),e("div",null,[e("div",He,[p(e("input",{disabled:u.value,"onUpdate:modelValue":s[5]||(s[5]=i=>l.value.IsActive=i),class:"form-check-input",type:"checkbox",role:"switch",id:"IsActive"},null,8,Ae),[[C,l.value.IsActive]]),e("label",Ce,[t(o,{t:l.value.IsActive?"Yes":"No"},null,8,["t"])])])])]),c.value?(a(),r("div",De,H(S.value),1)):y("",!0),e("div",Le,[e("button",{type:"submit",class:w([{disabled:u.value},"ms-auto btn bg-success-subtle text-success-emphasis border-success-subtle rounded-3"])},[t(o,{t:"Save"})],2)]),k.webHook?(a(),r($,{key:1},[s[14]||(s[14]=e("hr",null,null,-1)),e("div",We,[e("h6",Ve,[t(o,{t:"Danger Zone"})]),e("button",{onClick:s[6]||(s[6]=i=>B()),type:"button",class:w([{disabled:u.value},"btn bg-danger-subtle text-danger-emphasis border-danger-subtle rounded-3 ms-auto"])},[t(o,{t:"Delete"})],2)])],64)):y("",!0)],32)]))}}),Ue={class:"card rounded-3"},Pe={class:"card-header d-flex align-items-center"},Ie={class:"my-2"},Re={class:"card-body p-0"},Te={style:{height:"600px"},class:"overflow-scroll"},Be={key:0,class:"row g-0 h-100"},Me={class:"col-sm-4 border-end h-100",style:{"overflow-y":"scroll"}},Ne={class:"list-group d-flex flex-column d-flex h-100"},je=["onClick"],Fe={class:"mb-0 fw-bold text-body url"},Ee={class:"url mb-0"},qe={key:1,class:"flex-grow-1 d-flex text-muted"},ze={class:"col-sm-8 overflow-scroll h-100"},Ge=V({__name:"dashboardWebHooks",setup(k){const f=v([]),g=v(!1);F(async()=>{await n(),g.value=!0});const n=async()=>{await R("/api/webHooks/getWebHooks",{},x=>{f.value=x.data})},l=v(!1),b=v(void 0);return(x,d)=>(a(),r("div",Ue,[e("div",Pe,[e("h6",Ie,[d[5]||(d[5]=e("i",{class:"bi bi-plug-fill me-2"},null,-1)),t(o,{t:"Webhooks"})]),l.value?(a(),r("button",{key:1,class:"btn bg-secondary-subtle text-secondary-emphasis border-1 border-secondary-subtle rounded-3 shadow-sm ms-auto",onClick:d[1]||(d[1]=c=>l.value=!1)},[d[7]||(d[7]=e("i",{class:"bi bi-chevron-left me-2"},null,-1)),t(o,{t:"Back"})])):(a(),r("button",{key:0,class:"btn bg-primary-subtle text-primary-emphasis border-1 border-primary-subtle rounded-3 shadow-sm ms-auto",onClick:d[0]||(d[0]=c=>{l.value=!0,b.value=void 0})},[d[6]||(d[6]=e("i",{class:"bi bi-plus-circle-fill me-2"},null,-1)),t(o,{t:"Webhook"})]))]),e("div",Re,[e("div",Te,[l.value?(a(),W(q,{key:1},{default:E(()=>[t(P,{onRefresh:d[4]||(d[4]=c=>{b.value=void 0,l.value=!1,n()})})]),_:1})):(a(),r("div",Be,[e("div",Me,[e("div",Ne,[f.value.length>0?(a(!0),r($,{key:0},L(f.value,c=>(a(),r("a",{role:"button",onClick:S=>b.value=c,class:w([{active:b.value?.WebHookID===c.WebHookID},"list-group-item list-group-item-action"]),"aria-current":"true"},[e("p",Fe,H(c.PayloadURL),1),e("p",Ee,[t(o,{t:"Subscribed Actions"}),D(": "+H(c.SubscribedActions.join(", ")),1)])],10,je))),256)):(a(),r("div",qe,[t(o,{t:"No Webhooks",class:"m-auto"})]))])]),e("div",ze,[b.value?(a(),W(P,{key:b.value,onDelete:d[2]||(d[2]=c=>{n(),b.value=void 0}),webHook:b.value,onRefresh:d[3]||(d[3]=c=>n())},null,8,["webHook"])):y("",!0)])]))])])]))}}),Ke=z(Ge,[["__scopeId","data-v-7909f956"]]),Oe={class:"d-flex gap-3 flex-column"},Ye={class:"card rounded-3"},Ze={class:"card-header"},Je={class:"my-2"},Qe={class:"card-body"},Xe={class:"row g-2"},es={class:"col-sm"},ss={class:"col-sm"},ts={class:"card rounded-3"},ls={class:"card-header"},os={class:"my-2"},as={class:"card-body"},ds={class:"card rounded-3"},ns={class:"card-header"},is={class:"my-2"},rs={class:"card-body d-flex flex-column gap-3"},fs=V({__name:"wgdashboardSettings",setup(k){const f=G();return(g,n)=>(a(),r("div",Oe,[e("div",Ye,[e("div",Ze,[e("h6",Je,[n[0]||(n[0]=e("i",{class:"bi bi-magic me-2"},null,-1)),t(o,{t:"Appearance"})])]),e("div",Qe,[e("div",Xe,[e("div",es,[t(K)]),e("div",ss,[t(O)])])])]),e("div",ts,[e("div",ls,[e("h6",os,[n[1]||(n[1]=e("i",{class:"bi bi-ethernet me-2"},null,-1)),t(o,{t:"Dashboard IP Address & Listen Port"})])]),e("div",as,[t(Y)])]),e("div",ds,[e("div",ns,[e("h6",is,[n[2]||(n[2]=e("i",{class:"bi bi-people-fill me-2"},null,-1)),t(o,{t:"Account Settings"})])]),e("div",rs,[e("div",null,[t(Z,{targetData:"username",title:"Username"})]),n[3]||(n[3]=e("hr",null,null,-1)),e("div",null,[t(J,{targetData:"password"})]),n[4]||(n[4]=e("hr",null,null,-1)),e("div",null,[e("h6",null,[t(o,{t:"Multi-Factor Authentication (MFA)"})]),I(f).getActiveCrossServer()?y("",!0):(a(),W(ee,{key:0}))])])]),t(Q),t(X),t(Ke)]))}});export{fs as default};
